function updatePreview(){mode=this.getAttribute("data-mode");preview.style.backgroundBlendMode=mode}function previewFile(){var e=document.querySelector("input[type=file]"),t=e.files[0],n=new FileReader;if(t){n.readAsDataURL(t)}else{alert("Select an image..")}n.onloadend=function(){preview.style.backgroundImage="url("+n.result+")";for(var e=0;e<thumbs.length;e++){thumbs[e].style.backgroundImage="url("+n.result+")"}}}(function(e){var t=function(){var t='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',n={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:true,flat:false,layout:"full",submit:1,submitText:"OK",height:156},o=function(t,n){var r=s(t);e(n).data("colpick").fields.eq(1).val(r.r).end().eq(2).val(r.g).end().eq(3).val(r.b).end()},a=function(t,n){e(n).data("colpick").fields.eq(4).val(Math.round(t.h)).end().eq(5).val(Math.round(t.s)).end().eq(6).val(Math.round(t.b)).end()},f=function(t,n){e(n).data("colpick").fields.eq(0).val(u(t))},l=function(t,n){e(n).data("colpick").selector.css("backgroundColor","#"+u({h:t.h,s:100,b:100}));e(n).data("colpick").selectorIndic.css({left:parseInt(e(n).data("colpick").height*t.s/100,10),top:parseInt(e(n).data("colpick").height*(100-t.b)/100,10)})},c=function(t,n){e(n).data("colpick").hue.css("top",parseInt(e(n).data("colpick").height-e(n).data("colpick").height*t.h/360,10))},h=function(t,n){e(n).data("colpick").currentColor.css("backgroundColor","#"+u(t))},p=function(t,n){e(n).data("colpick").newColor.css("backgroundColor","#"+u(t))},d=function(t){var n=e(this).parent().parent(),h;if(this.parentNode.className.indexOf("_hex")>0){n.data("colpick").color=h=r(_(this.value));o(h,n.get(0));a(h,n.get(0))}else if(this.parentNode.className.indexOf("_hsb")>0){n.data("colpick").color=h=O({h:parseInt(n.data("colpick").fields.eq(4).val(),10),s:parseInt(n.data("colpick").fields.eq(5).val(),10),b:parseInt(n.data("colpick").fields.eq(6).val(),10)});o(h,n.get(0));f(h,n.get(0))}else{n.data("colpick").color=h=i(M({r:parseInt(n.data("colpick").fields.eq(1).val(),10),g:parseInt(n.data("colpick").fields.eq(2).val(),10),b:parseInt(n.data("colpick").fields.eq(3).val(),10)}));f(h,n.get(0));a(h,n.get(0))}l(h,n.get(0));c(h,n.get(0));p(h,n.get(0));n.data("colpick").onChange.apply(n.parent(),[h,u(h),s(h),n.data("colpick").el,0])},v=function(t){e(this).parent().removeClass("colpick_focus")},m=function(){e(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");e(this).parent().addClass("colpick_focus")},g=function(t){t.preventDefault?t.preventDefault():t.returnValue=false;var n=e(this).parent().find("input").focus();var r={el:e(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:n,val:parseInt(n.val(),10),preview:e(this).parent().parent().data("colpick").livePreview};e(document).mouseup(r,b);e(document).mousemove(r,y)},y=function(e){e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val-e.pageY+e.data.y,10))));if(e.data.preview){d.apply(e.data.field.get(0),[true])}return false},b=function(t){d.apply(t.data.field.get(0),[true]);t.data.el.removeClass("colpick_slider").find("input").focus();e(document).off("mouseup",b);e(document).off("mousemove",y);return false},w=function(t){t.preventDefault?t.preventDefault():t.returnValue=false;var n={cal:e(this).parent(),y:e(this).offset().top};e(document).on("mouseup touchend",n,S);e(document).on("mousemove touchmove",n,E);var r=t.type=="touchstart"?t.originalEvent.changedTouches[0].pageY:t.pageY;d.apply(n.cal.data("colpick").fields.eq(4).val(parseInt(360*(n.cal.data("colpick").height-(r-n.y))/n.cal.data("colpick").height,10)).get(0),[n.cal.data("colpick").livePreview]);return false},E=function(e){var t=e.type=="touchmove"?e.originalEvent.changedTouches[0].pageY:e.pageY;d.apply(e.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,t-e.data.y)))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]);return false},S=function(t){o(t.data.cal.data("colpick").color,t.data.cal.get(0));f(t.data.cal.data("colpick").color,t.data.cal.get(0));e(document).off("mouseup touchend",S);e(document).off("mousemove touchmove",E);return false},x=function(t){t.preventDefault?t.preventDefault():t.returnValue=false;var n={cal:e(this).parent(),pos:e(this).offset()};n.preview=n.cal.data("colpick").livePreview;e(document).on("mouseup touchend",n,N);e(document).on("mousemove touchmove",n,T);var r,i;if(t.type=="touchstart"){pageX=t.originalEvent.changedTouches[0].pageX,i=t.originalEvent.changedTouches[0].pageY}else{pageX=t.pageX;i=t.pageY}d.apply(n.cal.data("colpick").fields.eq(6).val(parseInt(100*(n.cal.data("colpick").height-(i-n.pos.top))/n.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-n.pos.left)/n.cal.data("colpick").height,10)).get(0),[n.preview]);return false},T=function(e){var t,n;if(e.type=="touchmove"){pageX=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY}else{pageX=e.pageX;n=e.pageY}d.apply(e.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(e.data.cal.data("colpick").height-Math.max(0,Math.min(e.data.cal.data("colpick").height,n-e.data.pos.top)))/e.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(e.data.cal.data("colpick").height,pageX-e.data.pos.left))/e.data.cal.data("colpick").height,10)).get(0),[e.data.preview]);return false},N=function(t){o(t.data.cal.data("colpick").color,t.data.cal.get(0));f(t.data.cal.data("colpick").color,t.data.cal.get(0));e(document).off("mouseup touchend",N);e(document).off("mousemove touchmove",T);return false},C=function(t){var n=e(this).parent();var r=n.data("colpick").color;n.data("colpick").origColor=r;h(r,n.get(0));n.data("colpick").onSubmit(r,u(r),s(r),n.data("colpick").el)},k=function(t){t.stopPropagation();var n=e("#"+e(this).data("colpickId"));n.data("colpick").onBeforeShow.apply(this,[n.get(0)]);var r=e(this).offset();var i=r.top+this.offsetHeight;var s=r.left;var o=A();var u=n.width();if(s+u>o.l+o.w){s-=u}n.css({left:s+"px",top:i+"px"});if(n.data("colpick").onShow.apply(this,[n.get(0)])!=false){n.show()}e("html").mousedown({cal:n},L);n.mousedown(function(e){e.stopPropagation()})},L=function(t){if(t.data.cal.data("colpick").onHide.apply(this,[t.data.cal.get(0)])!=false){t.data.cal.hide()}e("html").off("mousedown",L)},A=function(){var e=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth)}},O=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},M=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},_=function(e){var t=6-e.length;if(t>0){var n=[];for(var r=0;r<t;r++){n.push("0")}n.push(e);e=n.join("")}return e},D=function(){var t=e(this).parent();var n=t.data("colpick").origColor;t.data("colpick").color=n;o(n,t.get(0));f(n,t.get(0));a(n,t.get(0));l(n,t.get(0));c(n,t.get(0));p(n,t.get(0))};return{init:function(s){s=e.extend({},n,s||{});if(typeof s.color=="string"){s.color=r(s.color)}else if(s.color.r!=undefined&&s.color.g!=undefined&&s.color.b!=undefined){s.color=i(s.color)}else if(s.color.h!=undefined&&s.color.s!=undefined&&s.color.b!=undefined){s.color=O(s.color)}else{return this}return this.each(function(){if(!e(this).data("colpickId")){var n=e.extend({},s);n.origColor=s.color;var r="collorpicker_"+parseInt(Math.random()*1e3);e(this).data("colpickId",r);var i=e(t).attr("id",r);i.addClass("colpick_"+n.layout+(n.submit?"":" colpick_"+n.layout+"_ns"));if(n.colorScheme!="light"){i.addClass("colpick_"+n.colorScheme)}i.find("div.colpick_submit").html(n.submitText).click(C);n.fields=i.find("input").change(d).blur(v).focus(m);i.find("div.colpick_field_arrs").mousedown(g).end().find("div.colpick_current_color").click(D);n.selector=i.find("div.colpick_color").on("mousedown touchstart",x);n.selectorIndic=n.selector.find("div.colpick_selector_outer");n.el=this;n.hue=i.find("div.colpick_hue_arrs");huebar=n.hue.parent();var u=navigator.userAgent.toLowerCase();var y=navigator.appName==="Microsoft Internet Explorer";var b=y?parseFloat(u.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0;var E=y&&b<10;var S=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(E){var T,N;for(T=0;T<=11;T++){N=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+S[T]+", endColorstr="+S[T+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+S[T]+", endColorstr="+S[T+1]+')";');huebar.append(N)}}else{stopList=S.join(",");huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ")}i.find("div.colpick_hue").on("mousedown touchstart",w);n.newColor=i.find("div.colpick_new_color");n.currentColor=i.find("div.colpick_current_color");i.data("colpick",n);o(n.color,i.get(0));a(n.color,i.get(0));f(n.color,i.get(0));c(n.color,i.get(0));l(n.color,i.get(0));h(n.color,i.get(0));p(n.color,i.get(0));if(n.flat){i.appendTo(this).show();i.css({position:"relative",display:"block"})}else{i.appendTo(document.body);e(this).on(n.showEvent,k);i.css({position:"absolute"})}}})},showPicker:function(){return this.each(function(){if(e(this).data("colpickId")){k.apply(this)}})},hidePicker:function(){return this.each(function(){if(e(this).data("colpickId")){e("#"+e(this).data("colpickId")).hide()}})},setColor:function(t,n){n=typeof n==="undefined"?1:n;if(typeof t=="string"){t=r(t)}else if(t.r!=undefined&&t.g!=undefined&&t.b!=undefined){t=i(t)}else if(t.h!=undefined&&t.s!=undefined&&t.b!=undefined){t=O(t)}else{return this}return this.each(function(){if(e(this).data("colpickId")){var r=e("#"+e(this).data("colpickId"));r.data("colpick").color=t;r.data("colpick").origColor=t;o(t,r.get(0));a(t,r.get(0));f(t,r.get(0));c(t,r.get(0));l(t,r.get(0));p(t,r.get(0));r.data("colpick").onChange.apply(r.parent(),[t,u(t),s(t),r.data("colpick").el,1]);if(n){h(t,r.get(0))}}})}}}();var n=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}};var r=function(e){return i(n(e))};var i=function(e){var t={h:0,s:0,b:0};var n=Math.min(e.r,e.g,e.b);var r=Math.max(e.r,e.g,e.b);var i=r-n;t.b=r;t.s=r!=0?255*i/r:0;if(t.s!=0){if(e.r==r)t.h=(e.g-e.b)/i;else if(e.g==r)t.h=2+(e.b-e.r)/i;else t.h=4+(e.r-e.g)/i}else t.h=-1;t.h*=60;if(t.h<0)t.h+=360;t.s*=100/255;t.b*=100/255;return t};var s=function(e){var t={};var n=e.h;var r=e.s*255/100;var i=e.b*255/100;if(r==0){t.r=t.g=t.b=i}else{var s=i;var o=(255-r)*i/255;var u=(s-o)*(n%60)/60;if(n==360)n=0;if(n<60){t.r=s;t.b=o;t.g=o+u}else if(n<120){t.g=s;t.b=o;t.r=s-u}else if(n<180){t.g=s;t.r=o;t.b=o+u}else if(n<240){t.b=s;t.r=o;t.g=s-u}else if(n<300){t.b=s;t.g=o;t.r=o+u}else if(n<360){t.r=s;t.g=o;t.b=s-u}else{t.r=0;t.g=0;t.b=0}}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}};var o=function(t){var n=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];e.each(n,function(e,t){if(t.length==1){n[e]="0"+t}});return n.join("")};var u=function(e){return o(s(e))};e.fn.extend({colpick:t.init,colpickHide:t.hidePicker,colpickShow:t.showPicker,colpickSetColor:t.setColor});e.extend({colpick:{rgbToHex:o,rgbToHsb:i,hsbToHex:u,hsbToRgb:s,hexToHsb:r,hexToRgb:n}})})(jQuery);!function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=r(e,t)?s:i;n(e,t)}var r,i,s;"classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(r=function(e,n){return t(n).test(e.className)},i=function(e,t){r(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:r,addClass:i,removeClass:s,toggleClass:n,has:r,add:i,remove:s,toggle:n};"function"==typeof define&&define.amd?define("classie/classie",o):e.classie=o}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype;r.getListeners=function(e){var t,n,r=this._getEvents();if("object"==typeof e){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if("object"===n)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],s=n.listener.apply(this,t||[]),(s===this._getOnceReturnValue()||n.once===!0)&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,r){t[n+r]=r.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,r.handleEvent.call(r,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,r.call(t,n)},t.attachEvent("on"+n,t[n+r])});var r=function(){};t.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var i={bind:n,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",i):e.eventie=i}(this),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,i=0,s=n.length;s>i;i++)if(t=n[i]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;n>t;t++){var r=o[t];e[r]=0}return e}function r(e){function r(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var r=s(e);if("none"===r.display)return n();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var l=a.isBorderBox=!(!u||!r[u]||"border-box"!==r[u]),p=0,d=o.length;d>p;p++){var v=o[p],m=r[v],y=parseFloat(m);a[v]=isNaN(y)?0:y}var w=a.paddingLeft+a.paddingRight,E=a.paddingTop+a.paddingBottom,S=a.marginLeft+a.marginRight,x=a.marginTop+a.marginBottom,T=a.borderLeftWidth+a.borderRightWidth,N=a.borderTopWidth+a.borderBottomWidth,C=l&&i,k=t(r.width);k!==!1&&(a.width=k+(C?0:w+T));var L=t(r.height);return L!==!1&&(a.height=L+(C?0:E+N)),a.innerWidth=a.width-(w+T),a.innerHeight=a.height-(E+N),a.outerWidth=a.width+S,a.outerHeight=a.height+x,a}}var i,u=e("boxSizing");return function(){if(u){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[u]="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=s(e);i=200===t(r.width),n.removeChild(e)}}(),r}var i=document.defaultView,s=i&&i.getComputedStyle?function(e){return i.getComputedStyle(e,null)}:function(e){return e.currentStyle},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):e.getSize=r(e.getStyleProperty)}(window),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(){}function r(r,i,o,f,l){function h(e,n){this.element="string"==typeof e?s.querySelector(e):e,this.options=t({},this.options),t(this.options,n),this._create()}function p(){return!1}function d(e,t){e.x=void 0!==t.pageX?t.pageX:t.clientX,e.y=void 0!==t.pageY?t.pageY:t.clientY}function v(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}var m=f("transform"),g=!!f("perspective");t(h.prototype,i.prototype),h.prototype.options={},h.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=t({},this.position);var e=u(this.element);"relative"!==e.position&&"absolute"!==e.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},h.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles(!0)},h.prototype.bindHandles=function(t){var n;n=e.navigator.pointerEnabled?this.bindPointer:e.navigator.msPointerEnabled?this.bindMSPointer:this.bindMouseTouch,t=void 0===t?!0:!!t;for(var r=0,i=this.handles.length;i>r;r++){var s=this.handles[r];n.call(this,s,t)}},h.prototype.bindPointer=function(e,t){var n=t?"bind":"unbind";o[n](e,"pointerdown",this),e.style.touchAction=t?"none":""},h.prototype.bindMSPointer=function(e,t){var n=t?"bind":"unbind";o[n](e,"MSPointerDown",this),e.style.msTouchAction=t?"none":""},h.prototype.bindMouseTouch=function(e,t){var n=t?"bind":"unbind";o[n](e,"mousedown",this),o[n](e,"touchstart",this),t&&w(e)};var y="attachEvent"in s.documentElement,w=y?function(e){"IMG"===e.nodeName&&(e.ondragstart=p);for(var t=e.querySelectorAll("img"),n=0,r=t.length;r>n;n++){var i=t[n];i.ondragstart=p}}:n;h.prototype._getPosition=function(){var e=u(this.element),t=parseInt(e.left,10),n=parseInt(e.top,10);this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},h.prototype._addTransformPosition=function(e){if(m){var t=e[m];if(0===t.indexOf("matrix")){var n=t.split(","),r=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[r],10),s=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=s}}},h.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},h.prototype.getTouch=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r.identifier===this.pointerIdentifier)return r}},h.prototype.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this.dragStart(e,e)},h.prototype.ontouchstart=function(e){this.isDragging||this.dragStart(e,e.changedTouches[0])},h.prototype.onMSPointerDown=h.prototype.onpointerdown=function(e){this.isDragging||this.dragStart(e,e)};var E={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};h.prototype.dragStart=function(t,n){this.isEnabled&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.pointerIdentifier=void 0!==n.pointerId?n.pointerId:n.identifier,this._getPosition(),this.measureContainment(),d(this.startPoint,n),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this._bindEvents({events:E[t.type],node:t.preventDefault?e:s}),r.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,t,n]),this.animate())},h.prototype._bindEvents=function(e){for(var t=0,n=e.events.length;n>t;t++){var r=e.events[t];o.bind(e.node,r,this)}this._boundEvents=e},h.prototype._unbindEvents=function(){var e=this._boundEvents;if(e&&e.events){for(var t=0,n=e.events.length;n>t;t++){var r=e.events[t];o.unbind(e.node,r,this)}delete this._boundEvents}},h.prototype.measureContainment=function(){var e=this.options.containment;if(e){this.size=l(this.element);var t=this.element.getBoundingClientRect(),n=a(e)?e:"string"==typeof e?s.querySelector(e):this.element.parentNode;this.containerSize=l(n);var r=n.getBoundingClientRect();this.relativeStartPosition={x:t.left-r.left,y:t.top-r.top}}},h.prototype.onmousemove=function(e){this.dragMove(e,e)},h.prototype.onMSPointerMove=h.prototype.onpointermove=function(e){e.pointerId===this.pointerIdentifier&&this.dragMove(e,e)},h.prototype.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragMove(e,t)},h.prototype.dragMove=function(e,t){d(this.dragPoint,t);var n=this.dragPoint.x-this.startPoint.x,r=this.dragPoint.y-this.startPoint.y,i=this.options.grid,s=i&&i[0],o=i&&i[1];n=v(n,s),r=v(r,o),n=this.containDrag("x",n,s),r=this.containDrag("y",r,o),n="y"===this.options.axis?0:n,r="x"===this.options.axis?0:r,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+r,this.dragPoint.x=n,this.dragPoint.y=r,this.emitEvent("dragMove",[this,e,t])},h.prototype.containDrag=function(e,t,n){if(!this.options.containment)return t;var r="x"===e?"width":"height",i=this.relativeStartPosition[e],s=v(-i,n,"ceil"),o=this.containerSize[r]-i-this.size[r];return o=v(o,n,"floor"),Math.min(o,Math.max(s,t))},h.prototype.onmouseup=function(e){this.dragEnd(e,e)},h.prototype.onMSPointerUp=h.prototype.onpointerup=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},h.prototype.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragEnd(e,t)},h.prototype.dragEnd=function(e,t){this.isDragging=!1,delete this.pointerIdentifier,m&&(this.element.style[m]="",this.setLeftTop()),this._unbindEvents(),r.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,e,t])},h.prototype.onMSPointerCancel=h.prototype.onpointercancel=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},h.prototype.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);this.dragEnd(e,t)},h.prototype.animate=function(){if(this.isDragging){this.positionDrag();var e=this;c(function(){e.animate()})}};var S=g?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"};return h.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},h.prototype.positionDrag=m?function(){this.element.style[m]=S(this.dragPoint.x,this.dragPoint.y)}:h.prototype.setLeftTop,h.prototype.enable=function(){this.isEnabled=!0},h.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},h.prototype.destroy=function(){this.disable(),m&&(this.element.style[m]=""),this.element.style.left="",this.element.style.top="",this.element.style.position="",this.bindHandles(!1)},h}for(var i,s=e.document,o=s.defaultView,u=o&&o.getComputedStyle?function(e){return o.getComputedStyle(e,null)}:function(e){return e.currentStyle},a="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},f=0,l="webkit moz ms o".split(" "),c=e.requestAnimationFrame,h=e.cancelAnimationFrame,p=0;p<l.length&&(!c||!h);p++)i=l[p],c=c||e[i+"RequestAnimationFrame"],h=h||e[i+"CancelAnimationFrame"]||e[i+"CancelRequestAnimationFrame"];c&&h||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-f)),i=e.setTimeout(function(){t(n+r)},r);return f=n+r,i},h=function(t){e.clearTimeout(t)}),"function"==typeof define&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],r):"object"==typeof exports?module.exports=r(require("desandro-classie"),require("wolfy87-eventemitter"),require("eventie"),require("desandro-get-style-property"),require("get-size")):e.Draggabilly=r(e.classie,e.EventEmitter,e.eventie,e.getStyleProperty,e.getSize)}(window);var preview=document.getElementById("preview"),thumbnails=[],thumbs=document.querySelectorAll(".thumbnail"),textIcon=document.getElementById("text-icon"),mode,text=document.getElementById("text"),textOptions=document.getElementById("textOptions"),textContainer=document.getElementById("textContainer"),mixMode=document.getElementById("mixMode");for(var i=0;i<thumbs.length;i++){var self=thumbs[i];self.addEventListener("click",updatePreview,false)}(function(){function e(){if(textIsVisible==false){textContainer.style.display="block";textIsVisible=true}else{textIsVisible=false;textContainer.style.display="none"}}function t(){if(textIconActive==false){textIcon.classList.add("active");textIconActive=true}else{textIconActive=false;textIcon.classList.remove("active")}}function n(){if(textOptionsVisible==false){textOptions.style.visibility="visible";textOptionsVisible=true}else{textOptionsVisible=false;textOptions.style.visibility="hidden"}}function i(){var e=this.value;console.log(this.value);text.style.mixBlendMode=e}document.execCommand("enableObjectResizing",false,false);textIcon.addEventListener("click",e,false);textIcon.addEventListener("click",n,false);textIcon.addEventListener("click",t,false);textIsVisible=false,textIconActive=false,textOptionsVisible=false;var r=new Draggabilly(textOptions,{containment:".preview",handle:".handle"});mixMode.addEventListener("change",i,false);})();(function(){var e=$(".preview"),t=$(".thumbnail"),n=$("h1"),r=$(".drop-icon"),i=$(".text-drop-icon"),s=$(".paint-brush-icon");$("#bgColor").colpick({layout:"hex",submit:0,color:"6b1cba",onChange:function(n,i,s,o,u){e.css("background-color","#"+i);t.css("background-color","#"+i);r.css("fill","#"+i)}});$("#textColor").colpick({layout:"hex",submit:0,color:"fa9a00",onChange:function(e,t,r,s,o){n.css("color","#"+t);i.css("fill","#"+t)}});$("#textBgColor").colpick({layout:"hex",submit:0,color:"1cba7d",onChange:function(e,t,r,i,o){n.css("background-color","#"+t);s.css("fill","#"+t)}})})()